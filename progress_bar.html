<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Mateusz Konieczny</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <script>
      // TODO:
      // not entirely fake as it is based on expected real time
      // and not intentionally misleading like for example randomized booking.com displays
      //
      // it would be nice to have it based on area size - there is probably some relation here
      const predictedTimeInSeconds = 30;
      var completed = false;
      var doneInPercents = 0;
      const timeBetweenUpdatesInSeconds = 0.1;
      const updateCount = predictedTimeInSeconds / timeBetweenUpdatesInSeconds;
      const incrementOnUpdateBy = 100 / updateCount;
      let progressBar = document.getElementById(progress_bar_id);
  
  
      function setProgressValue(newProgress) {
        doneInPercents = newProgress;
        if(doneInPercents >= 100) {
          doneInPercents = 100;
        }
        progressBar.value = doneInPercents;
      }
  
      function markAsCompleted(){
        setProgressValue(100);
        completed = true;
      }
  
      function startShowingProgress(){
        doneInPercents = 0;
        completed = false;
        const interval = setInterval(() => {
        if(completed) {
          clearInterval(interval); // terminates
        } else {
          var progress = doneInPercents + incrementOnUpdateBy;
          if (progress > 95) {
            progress = 10;
          }
          setProgressValue(progress)
        }
      }, timeBetweenUpdatesInSeconds * 1000);
      }
      </script>
  
    <progress id="progress_bar" value="0" max="100" style="width: 100%"></progress>
    <input type="button" id="start" value="Start"/>
    <input type="button" id="finish" value="Finish"/>
    <script>
    document.getElementById('finish')
      .addEventListener('click', markAsCompleted, false);

    document.getElementById('start')
    .addEventListener('click', startShowingProgress, false);
    </script>


  </body>
</html>
